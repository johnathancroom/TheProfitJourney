<% content_for :body do %>
  <%= form_for @user, :url => refinery.akouo_account_path, :html => { :method => "PUT", :class => "styled_form" } do |f| %>
    <% if @user.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@user.errors.count, "error") %> need to be corrected before continuing:</h2>

        <ul>
        <% @user.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <h1>User Details</h1>
    <div>
      <%= f.label :first_name %>
      <%= f.text_field :first_name %>
    </div>

    <div>
      <%= f.label :last_name %>
      <%= f.text_field :last_name %>
    </div>

    <hr>

    <h1>Change Password</h1>
    <p>Leaving password fields blank will keep your current password the same.</p>
    <div>
      <%= f.label :password, "New Password" %>
      <%= f.password_field :password %>
    </div>

    <div>
      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation %>
    </div>

    <h1>Your Plan</h1>
    <%= @plans[@user.get_plan][0] %>
    <%= link_to "Edit Plan", refinery.akouo_account_plans_path %>

    <hr>

    <h1>Workshop</h1>
    <p>Workshop attendance is included with a Platinum Plan. If you would like to attend without a Platinum Plan, you can <%= link_to "sign up for a workshop", "" %> for an extra fee.
    <ul class="account_workshops">
      <li>
        <%= f.radio_button :workshop_id, "-1", :checked => (true if @user.workshop == nil) || false %>
        <%= f.label :workshop_id, "No Workshop", :value => "-1" %>
      </li>

      <% @workshops.each do |workshop| %>
        <li>
          <%= f.radio_button :workshop_id, workshop.id, :checked => (true if @user.workshop == workshop) || false, :disabled => (true if !@user.can_attend_workshop?) %>
          <%= f.label :workshop_id, "#{workshop.title} â€“ #{workshop.date.to_formatted_s(:pretty)}", :value => workshop.id %>
        </li>
      <% end %>
    </ul>

    <%= f.submit "Save Changes", :class => "button" %>
  <% end %>
<% end %>

<%= render '/refinery/content_page' %>