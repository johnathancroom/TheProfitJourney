<% content_for :body_content_title do %>
  <%= "Sign up for #{@workshop.title}" %>
<% end %>
<% content_for :title do %>
  <%= "Sign up for #{@workshop.title}" %>
<% end %>

<% content_for :body do %>
  <%= render 'details' %>

  <%= form_for @user, :url => refinery.signup_workshops_workshop_path, :html => { :method => "PUT", :class => "workshop_signup" } do |f| %>
    <% if @user.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@user.errors.count, "error") %> need to be corrected before continuing:</h2>

        <ul>
        <% @user.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <%= f.label :username %>
    <%= f.text_field :username %>

    <%= f.label :email %>
    <%= f.email_field :email %>

    <%= f.label :password %>
    <%= f.password_field :password %>

    <hr>

    <% if !@transaction_error.nil? %>
      <div id="error_explanation">
        <h2>1 error needs to be corrected before continuing:</h2>
        <ul>
          <%= content_tag :li, @transaction_error %>
        </ul>
      </div>
    <% end %>

    <%= label_tag :card_number %>
    <%= text_field_tag :card_number, "4222222222222" %>

    <%= label_tag :card_expiration %>
    <%= select_tag :card_expiry_month, options_for_select(@months, 11) %>
    <%= select_tag :card_expiry_year, options_for_select(@years, 2014) %>

    <%= f.submit "Sign up!", :class => "signup" %>
  <% end %>
<% end %>

<%= render '/refinery/content_page' %>
